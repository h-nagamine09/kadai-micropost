[1mdiff --git a/app/controllers/application_controller.rb b/app/controllers/application_controller.rb[m
[1mindex b0093ea..6dd9682 100644[m
[1m--- a/app/controllers/application_controller.rb[m
[1m+++ b/app/controllers/application_controller.rb[m
[36m@@ -18,6 +18,7 @@[m [mclass ApplicationController < ActionController::Base[m
     @count_microposts = user.microposts.count[m
     @count_followings = user.followings.count #„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„Çã‰∫∫„Çí„Ç´„Ç¶„É≥„Éà[m
     @count_followers = user.followers.count   #„Éï„Ç©„É≠„Éº„Åï„Çå„Å¶„ÅÑ„Çã‰∫∫„Çí„Ç´„Ç¶„É≥„Éà[m
[32m+[m[32m    @count_likes = user.likes.count #„ÅäÊ∞ó„Å´ÂÖ•„Çä„Å£„Å¶„ÅÑ„ÇãÊäïÁ®ø„Çí„Ç´„Ç¶„É≥„Éà[m
    end [m
 end[m
 [m
[1mdiff --git a/app/controllers/toppages_controller.rb b/app/controllers/toppages_controller.rb[m
[1mindex 8fcf5bf..2a9eefa 100644[m
[1m--- a/app/controllers/toppages_controller.rb[m
[1m+++ b/app/controllers/toppages_controller.rb[m
[36m@@ -5,7 +5,7 @@[m [mclass ToppagesController < ApplicationController[m
       #form_forÁî® @micropost„Å´„Ç´„É©„ÅÆ„Ç§„É≥„Çπ„Çø„É≥„Çπ„Çí‰ª£ÂÖ•[m
       @micropost = current_user.microposts.build[m
       # ‰∏ÄË¶ßÁî®[m
[31m-      @microposts = current_user.microposts.order('created_at DESC').page(params[:page])[m
[32m+[m[32m      @microposts = current_user.feed_microposts.order('created_at DESC').page(params[:page])[m
     end[m
   end[m
 end[m
[1mdiff --git a/app/controllers/users_controller.rb b/app/controllers/users_controller.rb[m
[1mindex 33f5d1e..c197616 100644[m
[1m--- a/app/controllers/users_controller.rb[m
[1m+++ b/app/controllers/users_controller.rb[m
[36m@@ -1,6 +1,6 @@[m
 class UsersController < ApplicationController[m
   # ‰∫ãÂâç„Å´ÂÆüË°å„Åï„Çå„ÇãÂá¶ÁêÜ[m
[31m- before_action :require_user_logged_in,only: [:index, :show, :followings, :followers][m
[32m+[m[32m before_action :require_user_logged_in,only: [:index, :show, :followings, :followers, :likes][m
  [m
   def index[m
     #.all„ÅßDB‰∏ÄË¶ß„ÇíÂèñÂæóÂÖ®„É¶„Éº„Ç∂„Éº‰∏ÄË¶ß „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥„ÇíÈÅ©Áî®„Åï„Åõ„Çã„Åü„ÇÅ„Å´.page(params[:page])„Çí„Å§„Åë„Å¶„Çã[m
[36m@@ -32,18 +32,26 @@[m [mclass UsersController < ApplicationController[m
       render :new[m
     end[m
   end[m
[31m-  [m
[32m+[m[32m  # „Éï„Ç©„É≠„Éº„Ç§„É≥„Ç∞‰∏ÄË¶ß„ÇíÂèñÂæó[m
   def followings[m
     @user = User.find(params[:id])[m
     @followings = @user.followings.page(params[:page])[m
     counts(@user)[m
   end [m
[31m-  [m
[32m+[m[32m  # „Éï„Ç©„É≠„ÉØ„Éº‰∏ÄË¶ß„ÇíÂèñÂæó[m
   def followers[m
     @user = User.find(params[:id])[m
     @followers = @user.followers.page(params[:page])[m
     counts(@user)[m
   end[m
[32m+[m[41m  [m
[32m+[m[32m  # „ÅäÊ∞ó„Å´ÂÖ•„ÇäÁôªÈå≤„Åó„Å¶„ÅÑ„ÇãMicropost‰∏ÄË¶ß„ÇíÂèñÂæó[m
[32m+[m[32m  def likes[m
[32m+[m[32m     @user = User.find(params[:id])[m
[32m+[m[32m     @likes = @user.likes.page(params[:page])[m
[32m+[m[32m    counts(@user)[m
[32m+[m[32m  end[m[41m [m
[32m+[m[41m  [m
   #Strong Paramter „Çª„Ç≠„É•„É™„ÉÜ„Ç£„ÅÆ„Åü„ÇÅ[m
   #name,email,password,password_confirmation„ÇíË®±ÂèØ„ÄÇ[m
   private[m
[1mdiff --git a/app/models/micropost.rb b/app/models/micropost.rb[m
[1mindex 0c17aa3..d7732a6 100644[m
[1m--- a/app/models/micropost.rb[m
[1m+++ b/app/models/micropost.rb[m
[36m@@ -1,8 +1,10 @@[m
 class Micropost < ApplicationRecord[m
[31m-  belongs_to :user[m
   # belong_to :user„ÅØ„É¶„Éº„Ç∂„Éº„Å®Micropost„ÅÆ‰∏ÄÂØæÂ§ö„ÇíË°®Áèæ„Åó„Å¶„ÅÑ„Çã„ÄÇ„Åì„ÅÆ„Ç≥„Éº„Éâ„ÅÆ„Åä„Åã„Åí„Åßmicropost.user„Å®„Åô„Çã„Å®[m
   # micropost„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÇíÊåÅ„Å£„Å¶„ÅÑ„ÇãUser„ÇíÂèñÂæó„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Çã[m
[32m+[m[32m   belongs_to :user[m
[32m+[m[32m   has_many :favorites[m
[32m+[m[32m   has_many :users, through: :favorites[m
   [m
   validates :content,presence: true, length: {maximum: 255} [m
[31m-  #„Éê„É™„Éá„Éº„Ç∑„Éß„É≥[m
[32m+[m
 end[m
[1mdiff --git a/app/models/user.rb b/app/models/user.rb[m
[1mindex 16389eb..5fc1203 100644[m
[1m--- a/app/models/user.rb[m
[1m+++ b/app/models/user.rb[m
[36m@@ -15,12 +15,15 @@[m [mclass User < ApplicationRecord[m
   # Â§öÂØæÂ§ö„ÅÆÂõ≥„ÅÆÂè≥ÂçäÂàÜ„Å´„ÅÑ„ÇãËá™ÂàÜ„Åå„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„ÇãUser„Å∏„ÅÆÂèÇÁÖß[m
   has_many :relationships[m
   # Ëá™ÂàÜ„Åå„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„ÇãUserÈÅî„ÇíÂèñÂæó[m
[32m+[m[32m  has_many :favorites[m
[32m+[m[41m  [m
   has_many :followings, through: :relationships, source: :follow # < user.followers„Å®Êõ∏„Åë„Å∞Ë©≤ÂΩì„ÅÆuser„Åå„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„ÇãUserÈÅî„ÇíÂèñÂæó„Åß„Åç„Çã[m
   # Â§öÂØæÂ§ö„ÅÆÂõ≥„ÅÆÂ∑¶ÂçäÂàÜ„Å´„ÅÑ„ÇãUser„Åã„Çâ„Éï„Ç©„É≠„Éº„Åï„Çå„Å¶„ÅÑ„Çã„Å®„ÅÑ„ÅÜÈñ¢‰øÇ„Å∏„ÅÆÂèÇÁÖß(Ëá™ÂàÜ„Çí„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„ÇãUser„Å∏„ÅÆÂèÇÁÖß)[m
   has_many :reverses_of_relationship, class_name: 'Relationship',foreign_key: 'follow_id'[m
   # Ëá™ÂàÜ„Çí„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„ÇãUserÈÅî„ÇíÂèñÂæó[m
   has_many :followers, through: :reverses_of_relationship, source: :user[m
[31m-  [m
[32m+[m[32m  # „ÅäÊ∞ó„Å´ÂÖ•„Çä„Çí„Å§„Åë„Åümicropost„ÇíÂèñÂæó[m
[32m+[m[32m  has_many :likes, through: :favorites, source: :micropost[m
   # ‰∏≠Èñì„ÉÜ„Éº„Éñ„É´„ÇíÁµåÁî±„Åó„Å¶Áõ∏Êâã„ÅÆÊÉÖÂ†±„ÇíÂèñÂæó„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åô„Çã„Åü„ÇÅ„Å´„ÅØ'through'„Çí‰ΩøÁî®„Åô„Çã[m
   [m
   # „Éï„Ç©„É≠„Éº„Ç¢„É≥„Éï„Ç©„É≠„Éº„É°„ÇΩ„ÉÉ„Éâ[m
[36m@@ -50,7 +53,25 @@[m [mclass User < ApplicationRecord[m
     Micropost.where(user_id: self.following_ids + [self.id])[m
     # Micropost.where(user_id: „Éï„Ç©„É≠„Éº„É¶„Éº„Ç∂ + Ëá™ÂàÜËá™Ë∫´)[m
   end[m
[32m+[m[41m  [m
[32m+[m[32m  # --------Ë™≤È°å „ÅäÊ∞ó„Å´ÂÖ•„Çä„Éú„Çø„É≥--------2/9[m
[32m+[m[41m  [m
[32m+[m[32m  def like(other_micropost)[m
[32m+[m[32m    unless self == other_micropost[m
[32m+[m[32m      self.favorites.find_or_create_by(micropost_id: other_micropost.id)[m
[32m+[m[32m    end[m
[32m+[m[32m  end[m
[32m+[m[41m  [m
[32m+[m[32m  def unlike(other_micropost)[m
[32m+[m[32m    favorite = self.favorites.find_by(micropost_id: other_micropost.id)[m
[32m+[m[32m    favorite.destroy if favorite[m
[32m+[m[32m  end[m[41m [m
[32m+[m[41m  [m
[32m+[m[32m  def like?(other_micropost)[m
[32m+[m[32m    self.likes.include?(other_micropost)[m
[32m+[m[32m  end[m
 end[m
[41m+ [m
 [m
 [m
 [m
[1mdiff --git a/app/views/layouts/_navbar.html.erb b/app/views/layouts/_navbar.html.erb[m
[1mindex 11f0771..bbc0761 100644[m
[1m--- a/app/views/layouts/_navbar.html.erb[m
[1m+++ b/app/views/layouts/_navbar.html.erb[m
[36m@@ -19,6 +19,7 @@[m
           <% if logged_in? %>[m
           <!--user‰∏ÄË¶ß„ÅÆ„É™„É≥„ÇØ„ÇíÂÆüË£Ö-->[m
           <li><%= link_to 'Users',users_path %></li>[m
[32m+[m[41m         [m
           <li class="dropdown">[m
             <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><%= current_user.name %> <span class="caret"></span></a>[m
              <ul class="dropdown-menu">[m
[1mdiff --git a/app/views/microposts/_microposts.html.erb b/app/views/microposts/_microposts.html.erb[m
[1mindex e109753..056c589 100644[m
[1m--- a/app/views/microposts/_microposts.html.erb[m
[1m+++ b/app/views/microposts/_microposts.html.erb[m
[36m@@ -15,6 +15,10 @@[m
           <% if current_user == micropost.user %>[m
           <!--ÂâäÈô§„Éú„Çø„É≥-->[m
             <%= link_to "Delete",micropost, method: :delete, data: {confirm: "You Sure?"},class: 'btn btn-danger btn-xs' %>[m
[32m+[m[41m          [m
[32m+[m[32m          <% else %>[m
[32m+[m[32m            <%=render 'favorites/like_button', micropost: micropost %>[m
[32m+[m[32m            <!--render '„Éë„Éº„Ç∑„É£„É´„ÅÆ„Éë„Çπ, „Éë„Éº„Ç∑„É£„É´„Åß‰Ωø„ÅÜÂ§âÊï∞Âêç: Ê∏°„ÅôÂÄ§'-->[m
           <% end %>[m
         </div>[m
       </div>[m
[36m@@ -22,5 +26,7 @@[m
      <% end %>[m
       <%= paginate microposts %>[m
 </ul>[m
[31m-[m
[32m+[m[41m   [m
[32m+[m[41m     [m
[32m+[m[41m      [m
 <!--micropost„ÅÆÂÖ±ÈÄö„ÅÆView „Éë„Éº„Ç∑„É£„É´-->[m
\ No newline at end of file[m
[1mdiff --git a/app/views/relationships/_follow_button.html.erb b/app/views/relationships/_follow_button.html.erb[m
[1mindex cfa4fd4..17397c0 100644[m
[1m--- a/app/views/relationships/_follow_button.html.erb[m
[1m+++ b/app/views/relationships/_follow_button.html.erb[m
[36m@@ -13,4 +13,4 @@[m
       <%= f.submit 'Follow',class: 'btn btn-primary btn-block' %>[m
     <% end %>[m
   <% end %>[m
[31m-<% end %>[m
\ No newline at end of file[m
[32m+[m[32m<% end %>[m
[1mdiff --git a/app/views/users/followers.html.erb b/app/views/users/followers.html.erb[m
[1mindex d71190b..310d32b 100644[m
[1m--- a/app/views/users/followers.html.erb[m
[1m+++ b/app/views/users/followers.html.erb[m
[36m@@ -15,6 +15,7 @@[m
       <li class="<%= 'active' if current_page?(user_path(@user)) %>"><%= link_to user_path(@user) do %>Microposts <span class="badge"><%= @count_microposts %></span><% end %></li>[m
       <li class="<%= 'active' if current_page?(followings_user_path(@user)) %>"><%= link_to followings_user_path(@user) do %>Followings <span class="badge"><%= @count_followings %></span><% end %></li>[m
       <li class="<%= 'active' if current_page?(followers_user_path(@user)) %>"><%= link_to followers_user_path(@user) do %>Followers <span class="badge"><%= @count_followers %></span><% end %></li>[m
[32m+[m[32m      <li class="<%= 'active' if current_page?(likes_user_path(@user)) %>"><%= link_to likes_user_path(@user) do %>Likes <span class="badge"><%= @count_likes %></span><% end %></li>[m
     </ul>[m
     <%= render 'users', users: @followers %>[m
   </div>[m
[1mdiff --git a/app/views/users/followings.html.erb b/app/views/users/followings.html.erb[m
[1mindex 6eb3c8b..8ce7127 100644[m
[1m--- a/app/views/users/followings.html.erb[m
[1m+++ b/app/views/users/followings.html.erb[m
[36m@@ -15,6 +15,7 @@[m
       <li class="<%= 'active' if current_page?(user_path(@user)) %>"><%= link_to user_path(@user) do %>Microposts <span class="badge"><%= @count_microposts %></span><% end %></li>[m
       <li class="<%= 'active' if current_page?(followings_user_path(@user)) %>"><%= link_to followings_user_path(@user) do %>Followings <span class="badge"><%= @count_followings %></span><% end %></li>[m
       <li class="<%= 'active' if current_page?(followers_user_path(@user)) %>"><%= link_to followers_user_path(@user) do %>Followers <span class="badge"><%= @count_followers %></span><% end %></li>[m
[32m+[m[32m       <li class="<%= 'active' if current_page?(likes_user_path(@user)) %>"><%= link_to likes_user_path(@user) do %>Likes <span class="badge"><%= @count_likes %></span><% end %></li>[m
     </ul>[m
     <%= render 'users', users: @followings %>[m
   </div>[m
[1mdiff --git a/app/views/users/show.html.erb b/app/views/users/show.html.erb[m
[1mindex 3cf0c2a..3904661 100644[m
[1m--- a/app/views/users/show.html.erb[m
[1m+++ b/app/views/users/show.html.erb[m
[36m@@ -10,6 +10,8 @@[m
     </div>[m
     <!--„Éï„Ç©„É≠„Éº„Éú„Çø„É≥„ÇíËøΩÂä†-->[m
     <%= render 'relationships/follow_button', user: @user %>[m
[32m+[m[41m   [m
[32m+[m[41m    [m
   </aside>[m
   <div class="col-xs-8">[m
     <ul class="nav-tabs nav-justified">[m
[36m@@ -18,6 +20,7 @@[m
       <li class="<%= 'active' if current_page?(user_path(@user))%>"><%=link_to user_path(@user) do %>Microposts <span class="badge"><%=@count_microposts %></span><% end %></li>[m
       <li class="<%= 'active' if current_page?(followings_user_path(@user)) %>"><%= link_to followings_user_path(@user) do %>Followings<span class="badge"><%=@count_followings %></span><% end %></li>[m
       <li class="<%= 'active' if current_page?(followers_user_path(@user)) %>"><%= link_to followers_user_path(@user) do %>Followers <span class="badge"><%= @count_followers %></span><% end %></li>[m
[32m+[m[32m      <li class="<%= 'active' if current_page?(likes_user_path(@user)) %>"><%= link_to likes_user_path(@user) do %>Likes <span class="badge"><%= @count_likes %></span><% end %></li>[m
     </ul>[m
     <%= render 'microposts/microposts', microposts: @microposts %>[m
   </div>[m
[1mdiff --git a/config/routes.rb b/config/routes.rb[m
[1mindex 6969b95..d9abfa0 100644[m
[1m--- a/config/routes.rb[m
[1m+++ b/config/routes.rb[m
[36m@@ -11,6 +11,7 @@[m [mRails.application.routes.draw do[m
     member do [m
       get :followings[m
       get :followers[m
[32m+[m[32m      get :likes[m
     end[m
   end[m
     [m
[36m@@ -20,4 +21,6 @@[m [mRails.application.routes.draw do[m
   [m
   # „É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„Éº„Åå„Éï„Ç©„É≠„Éº„ÄÅ„Ç¢„É≥„Éï„Ç©„É≠„Éº„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åô„Çã„É´„Éº„ÉÜ„Ç£„É≥„Ç∞[m
   resources :relationships, only: [:create , :destroy][m
[32m+[m[32m  # „É≠„Ç∞„Ç§„É≥„É¶„Éº„Ç∂„Åå„ÅäÊ∞ó„Å´ÂÖ•„Çä„ÇíÁôªÈå≤„Åß„Åç„Çã[m
[32m+[m[32m  resources :favorites, only: [:create, :destroy][m
 end[m
[1mdiff --git a/db/schema.rb b/db/schema.rb[m
[1mindex 000d646..19788f9 100644[m
[1m--- a/db/schema.rb[m
[1m+++ b/db/schema.rb[m
[36m@@ -10,7 +10,27 @@[m
 #[m
 # It's strongly recommended that you check this file into your version control system.[m
 [m
[31m-ActiveRecord::Schema.define(version: 20190206115539) do[m
[32m+[m[32mActiveRecord::Schema.define(version: 20190209115004) do[m
[32m+[m
[32m+[m[32m  create_table "favorites", force: :cascade, options: "ENGINE=InnoDB DEFAULT CHARSET=utf8" do |t|[m
[32m+[m[32m    t.integer  "user_id"[m
[32m+[m[32m    t.integer  "micropost_id"[m
[32m+[m[32m    t.datetime "created_at",   null: false[m
[32m+[m[32m    t.datetime "updated_at",   null: false[m
[32m+[m[32m    t.index ["micropost_id"], name: "index_favorites_on_micropost_id", using: :btree[m
[32m+[m[32m    t.index ["user_id", "micropost_id"], name: "index_favorites_on_user_id_and_micropost_id", unique: true, using: :btree[m
[32m+[m[32m    t.index ["user_id"], name: "index_favorites_on_user_id", using: :btree[m
[32m+[m[32m  end[m
[32m+[m
[32m+[m[32m  create_table "likes", force: :cascade, options: "ENGINE=InnoDB DEFAULT CHARSET=utf8" do |t|[m
[32m+[m[32m    t.integer  "user_id"[m
[32m+[m[32m    t.integer  "like_id"[m
[32m+[m[32m    t.datetime "created_at", null: false[m
[32m+[m[32m    t.datetime "updated_at", null: false[m
[32m+[m[32m    t.index ["like_id"], name: "index_likes_on_like_id", using: :btree[m
[32m+[m[32m    t.index ["user_id", "like_id"], name: "index_likes_on_user_id_and_like_id", unique: true, using: :btree[m
[32m+[m[32m    t.index ["user_id"], name: "index_likes_on_user_id", using: :btree[m
[32m+[m[32m  end[m
 [m
   create_table "microposts", force: :cascade, options: "ENGINE=InnoDB DEFAULT CHARSET=utf8" do |t|[m
     t.string   "content"[m
[36m@@ -38,6 +58,10 @@[m [mActiveRecord::Schema.define(version: 20190206115539) do[m
     t.datetime "updated_at",      null: false[m
   end[m
 [m
[32m+[m[32m  add_foreign_key "favorites", "microposts"[m
[32m+[m[32m  add_foreign_key "favorites", "users"[m
[32m+[m[32m  add_foreign_key "likes", "users"[m
[32m+[m[32m  add_foreign_key "likes", "users", column: "like_id"[m
   add_foreign_key "microposts", "users"[m
   add_foreign_key "relationships", "users"[m
   add_foreign_key "relationships", "users", column: "follow_id"[m
